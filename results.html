<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>TechValues Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "Test Edition #1" //Remember to update this before making changes to the test itself!
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>TechValues</h1>
<hr>

<h1>Results</h1>

<h2>Area: <span class="weight-300" id="area-label"></span></h2>
<div class="axis">
    <div class="value-badge frontend" id="img-equality" height="128pt">
        <p>FRONT-END</p>
    </div>
    <div class="bar frontend" id="bar-frontend"><div class="text-wrapper" id="frontend"></div></div>
    <div class="bar backend" id="bar-backend"><div class="text-wrapper" id="backend"></div></div>
    <div class="value-badge backend" id="img-equality" height="128pt">
        <p>BACK-END</p>
    </div>
</div>
<h2>Copyright: <span class="weight-300" id="copyright-label"></span></h2>
<div class="axis">
    <div class="value-badge foss" id="img-equality" height="128pt">
        <p>FOSS</p>
    </div>
    <div class="bar foss" id="bar-foss"><div class="text-wrapper" id="foss"></div></div>
    <div class="bar proprietary" id="bar-proprietary"><div class="text-wrapper" id="proprietary"></div></div>
    <div class="value-badge proprietary" id="img-equality" height="128pt">
        <p>PROPRIETARY</p>
    </div>
</div>
<h2>Technicality: <span class="weight-300" id="tech-label"></span></h2>
<div class="axis">
    <div class="value-badge basic" id="img-equality" height="128pt">
        <p>BASIC</p>
    </div>
    <div class="bar basic" id="bar-basic"><div class="text-wrapper" id="basic"></div></div>
    <div class="bar poweruser" id="bar-poweruser"><div class="text-wrapper" id="poweruser"></div></div>
    <div class="value-badge poweruser" id="img-equality" height="128pt">
        <p>POWERUSER</p>
    </div>
</div>
<h2>Modernity: <span class="weight-300" id="modern-label"></span></h2>
<div class="axis">
    <div class="value-badge newschool" id="img-equality" height="128pt">
        <p>NEWSCHOOL</p>
    </div>
    <div class="bar newschool" id="bar-newschool"><div class="text-wrapper" id="newschool"></div></div>
    <div class="bar oldschool" id="bar-oldschool"><div class="text-wrapper" id="oldschool"></div></div>
    <div class="value-badge oldschool" id="img-equality" height="128pt">
        <p>OLDSCHOOL</p>
    </div>
</div>
<h2>Privacy: <span class="weight-300" id="privacy-label"></span></h2>
<div class="axis">
    <div class="value-badge convenience" id="img-equality" height="128pt">
        <p>CONVENIENCE</p>
    </div>
    <div class="bar convenience" id="bar-convenience"><div class="text-wrapper" id="convenience"></div></div>
    <div class="bar privacy" id="bar-privacy"><div class="text-wrapper" id="privacy"></div></div>
    <div class="value-badge privacy" id="img-equality" height="128pt">
        <p>PRIVACY</p>
    </div>
</div>
<h2>Popularity: <span class="weight-300" id="popularity-label"></span></h2>
<div class="axis">
    <div class="value-badge popular" id="img-equality" height="128pt">
        <p>POPULAR</p>
    </div>
    <div class="bar popular" id="bar-popular"><div class="text-wrapper" id="popular"></div></div>
    <div class="bar niche" id="bar-niche"><div class="text-wrapper" id="niche"></div></div>
    <div class="value-badge niche" id="img-equality" height="128pt">
        <p>NICHE</p>
    </div>
</div>
<h2>Centralization: <span class="weight-300" id="centr-label"></span></h2>
<div class="axis">
    <div class="value-badge centralized" id="img-equality" height="128pt">
        <p>CENTRALIZED</p>
    </div>
    <div class="bar centralized" id="bar-centralized"><div class="text-wrapper" id="centralized"></div></div>
    <div class="bar decentralized" id="bar-decentralized"><div class="text-wrapper" id="decentralized"></div></div>
    <div class="value-badge decentralized" id="img-equality" height="128pt">
        <p>DECENTRALIZED</p>
    </div>
</div>
<p>Value icons coming Eventually[tm] ;)</p>
<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<p>Ideological matching is a work in progress, and is much less accurate than the values and axes.</p>
<p>You can send these results by copying and pasting the URL at the top of the page or using the image below. Think your matched ideology was wrong? Want to help us calibrate the test? Send the results along with your political ideology to us at eightvalues@gmail.com, or send us any comments, questions, or criticism. </p>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';">Back</button> <br>

<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    fendArray = ["Exclusively Frontend","Somewhat Frontend","Full-stack with Frontend preference","Full-stack","Full-stack with Backend preference","Somewhat Backend","Exclusively Backend"]
    fossArray = ["Copyleft Absolutist","FOSS Activist","FOSS Supporter","Centrist","Mild Proprietary Supporter","Proprietary Supporter","Proprietary Absolutist"]
    bascArray = ["Inexperienced","New User","Geek","Seasoned","Expert","Prodigy","Master"]
    nsclArray = ["Trend Follower","Progressive","Enthusiast","Balanced","Traditional","Very Traditional","Extremely Traditional"]
    convArray = ["Data Goldmine","Hedonist","Techie","Neutral","Privacy-Conscious","Opsec Nerd","Paranoid"]
    popuArray = ["Surface-Level","Popular Choice Picker","Slightly Knowledgeable","Knowledgeable","Niche Enjoyer","Niche Seeker","All-Knowing"]
    centArray = ["Absolute Centralization","Mostly Centralization","Moderate Centralization","Centrist","Moderate Decentralization","Mostly Decentralization","Absolute Decentralization"]

    function setLabel(val,ary) {
        if (val > 100) { return "" } else
        if (val > 90) { return ary[0] } else
        if (val > 75) { return ary[1] } else
        if (val > 60) { return ary[2] } else
        if (val >= 40) { return ary[3] } else
        if (val >= 25) { return ary[4] } else
        if (val >= 10) { return ary[5] } else
        if (val >= 0) { return ary[6] } else
        	{return ""}
    }

    frontend   = getQueryVariable("fe")
    foss       = getQueryVariable("fo")
    basic      = getQueryVariable("b")
    newschool  = getQueryVariable("n")
    conv       = getQueryVariable("co")
    popular    = getQueryVariable("p")
    central    = getQueryVariable("ce")
    backend    = (100 - frontend).toFixed(1)
    propri     = (100 - foss).toFixed(1)
    poweru     = (100 - basic).toFixed(1)
    oldschool  = (100 - newschool).toFixed(1)
    privacy    = (100 - conv).toFixed(1)
    niche      = (100 - popular).toFixed(1)
    decent     = (100 - central).toFixed(1)

    setBarValue("frontend",frontend)
    setBarValue("backend",backend)
    setBarValue("foss",foss)
    setBarValue("proprietary",propri)
    setBarValue("basic",basic)
    setBarValue("poweruser",poweru)
    setBarValue("newschool",newschool)
    setBarValue("oldschool",oldschool)
    setBarValue("convenience",conv)
    setBarValue("privacy",privacy)
    setBarValue("popular",popular)
    setBarValue("niche",niche)
    setBarValue("centralized",central)
    setBarValue("decentralized",decent)

    document.getElementById("area-label").innerHTML = setLabel(backend, fendArray)
    document.getElementById("copyright-label").innerHTML = setLabel(propri, fossArray)
    document.getElementById("tech-label").innerHTML = setLabel(poweru, bascArray)
    document.getElementById("modern-label").innerHTML = setLabel(oldschool, nsclArray)
    document.getElementById("privacy-label").innerHTML = setLabel(privacy, convArray)
    document.getElementById("popularity-label").innerHTML = setLabel(niche, popuArray)
    document.getElementById("centr-label").innerHTML = setLabel(decent, centArray)

    // TODO
    // ideology = ""
    // ideodist = Infinity
    // for (var i = 0; i < ideologies.length; i++) {
    //     dist = 0
    //     dist += Math.pow(Math.abs(ideologies[i].stats.econ - equality), 2)
    //     dist += Math.pow(Math.abs(ideologies[i].stats.govt - liberty), 2)
    //     dist += Math.pow(Math.abs(ideologies[i].stats.dipl - peace), 1.73856063)
    //     dist += Math.pow(Math.abs(ideologies[i].stats.scty - progress), 1.73856063)
    //     if (dist < ideodist) {
    //         ideology = ideologies[i].name
    //         ideodist = dist
    //     }
    // }
    // document.getElementById("ideology-label").innerHTML = ideology

    // function createImage(src, x, y, w, h) {
    //     img = new Image ()
    //     img.src = src
    //     img.onLoad = function() {
    //         ctx.drawImage(img, x, y, w, h)
    //     }
    // }

    //TODO: get all of this to work
    // window.onload = function() {
    //     var c = document.createElement("canvas")
    //     var ctx = c.getContext("2d")
    //     c.width = 800;
    //     c.height = 650;
    //     ctx.fillStyle = "#EEEEEE"
    //     ctx.fillRect(0,0,800,650);

    //     img = document.getElementById("img-equality")
    //     ctx.drawImage(img, 20, 170, 100, 100);
    //     img = document.getElementById("img-wealth")
    //     ctx.drawImage(img, 680, 170, 100, 100)
    //     img = document.getElementById("img-might")
    //     ctx.drawImage(img, 20, 290, 100, 100)
    //     img = document.getElementById("img-peace")
    //     ctx.drawImage(img, 680, 290, 100, 100)
    //     img = document.getElementById("img-liberty")
    //     ctx.drawImage(img, 20, 410, 100, 100)
    //     img = document.getElementById("img-authority")
    //     ctx.drawImage(img, 680, 410, 100, 100)
    //     img = document.getElementById("img-tradition")
    //     ctx.drawImage(img, 20, 530, 100, 100)
    //     img = document.getElementById("img-progress")
    //     ctx.drawImage(img, 680, 530, 100, 100)

    //     ctx.fillStyle="#222222"
    //     ctx.fillRect(120, 180, 560, 80)
    //     ctx.fillRect(120, 300, 560, 80)
    //     ctx.fillRect(120, 420, 560, 80)
    //     ctx.fillRect(120, 540, 560, 80)
    //     ctx.fillStyle="#f44336"
    //     ctx.fillRect(120, 184, 5.6*equality-2, 72)
    //     ctx.fillStyle="#00897b"
    //     ctx.fillRect(682-5.6*wealth, 184, 5.6*wealth-2, 72)
    //     ctx.fillStyle="#ff9800"
    //     ctx.fillRect(120, 304, 5.6*might-2, 72)
    //     ctx.fillStyle="#03a9f4"
    //     ctx.fillRect(682-5.6*peace, 304, 5.6*peace-2, 72)
    //     ctx.fillStyle="#ffeb3b"
    //     ctx.fillRect(120, 424, 5.6*liberty-2, 72)
    //     ctx.fillStyle="#3f51b5"
    //     ctx.fillRect(682-5.6*authority, 424, 5.6*authority-2, 72)
    //     ctx.fillStyle="#8bc34a"
    //     ctx.fillRect(120, 544, 5.6*tradition-2, 72)
    //     ctx.fillStyle="#9c27b0"
    //     ctx.fillRect(682-5.6*progress, 544, 5.6*progress-2, 72)
    //     ctx.fillStyle="#222222"
    //     ctx.font="700 80px Montserrat"
    //     ctx.textAlign="left"
    //     ctx.fillText("8values", 20, 90)
    //     ctx.font="50px Montserrat"
    //     ctx.fillText(ideology, 20, 140)

    //     ctx.textAlign="left"
    //     if (equality  > 30) {ctx.fillText(equality + "%", 130, 237.5)}
    //     if (might     > 30) {ctx.fillText(might + "%", 130, 357.5)}
    //     if (liberty   > 30) {ctx.fillText(liberty + "%", 130, 477.5)}
    //     if (tradition > 30) {ctx.fillText(tradition + "%", 130, 597.5)}
    //     ctx.textAlign="right"
    //     if (wealth    > 30) {ctx.fillText(wealth + "%", 670, 237.5)}
    //     if (peace     > 30) {ctx.fillText(peace + "%", 670, 357.5)}
    //     if (authority > 30) {ctx.fillText(authority + "%", 670, 477.5)}
    //     if (progress  > 30) {ctx.fillText(progress + "%", 670, 597.5)}

    //     ctx.font="300 30px Montserrat"
    //     ctx.fillText("8values.github.io", 780, 60)
	// 	ctx.fillText(version, 780, 90)
    //     ctx.textAlign="center"
    //     ctx.fillText("Economic Axis: " + document.getElementById("economic-label").innerHTML, 400, 175)
    //     ctx.fillText("Diplomatic Axis: " + document.getElementById("diplomatic-label").innerHTML, 400, 295)
    //     ctx.fillText("Civil Axis: " + document.getElementById("state-label").innerHTML, 400, 415)
    //     ctx.fillText("Societal Axis: " + document.getElementById("society-label").innerHTML, 400, 535)

    //     document.getElementById("banner").src = c.toDataURL();
    // }
    </script>
</body>
